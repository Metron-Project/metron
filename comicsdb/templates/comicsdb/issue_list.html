{% extends parent_template|default:"base.html" %}
{% load humanize %}
{% load static %}
{% block title %}
    {% if title %}{{ title }}{% endif %}
    Issues - Metron
{% endblock %}
{% block content %}
    <header class="block has-text-centered">
        <h1 class="title">
            {% if title %}{{ title }}{% endif %}
            Issues
        </h1>
    </header>
    <section class="section">
        <div class="container">{% include "comicsdb/partials/issue_filter.html" %}</div>
    </section>
    {% if issue_list %}
        <section class="section pt-0">
            <div class="container">
                {# Navigation Bar #}
                <nav class="level" aria-label="Issue list navigation">
                    <div class="level-left">
                        <div class="level-item">
                            <p class="subtitle is-5">
                                {% if page_obj.paginator %}
                                    <strong>{{ page_obj.paginator.count|intcomma }}</strong> Issue{{ page_obj.paginator.count|pluralize }}
                                {% else %}
                                    <strong>{{ issue_list.count|intcomma }}</strong> Issue{{ issue_list.count|pluralize }}
                                {% endif %}
                            </p>
                        </div>
                    </div>
                    {% if user.is_authenticated %}
                        <div class="level-right">
                            <div class="level-item">
                                <a class="button is-rounded is-primary"
                                   href="{% url 'issue:create' %}"
                                   title="Add a new issue"
                                   aria-label="Add a new issue">
                                    <span class="icon is-small" aria-hidden="true">
                                        <i class="fas fa-plus"></i>
                                    </span>
                                    <span>New</span>
                                </a>
                            </div>
                        </div>
                    {% endif %}
                </nav>
                {# Issue Cards #}
                {% include "comicsdb/partials/issue_card_grid.html" with items=issue_list %}
            </div>
        </section>
    {% else %}
        <section class="section pt-0">
            <div class="container has-text-centered">
                {% if has_active_filters %}
                    <p class="title is-4">No results found</p>
                    <p class="subtitle">Try adjusting your search filters</p>
                    <a href="{% url 'issue:list' %}" class="button is-light is-medium">
                        <span class="icon"><i class="fas fa-times"></i></span>
                        <span>Clear All Filters</span>
                    </a>
                {% else %}
                    {% include "comicsdb/partials/empty_state.html" with item_type="Issue" create_url="issue:create" create_title="Add a new issue" %}
                {% endif %}
            </div>
        </section>
    {% endif %}
{% endblock %}
{% block pagination %}
    {% load pagination_tags %}
    {% include "comicsdb/partials/pagination.html" %}
{% endblock %}
