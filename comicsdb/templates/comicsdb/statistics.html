{% extends parent_template|default:"base.html" %}
{% load static %}
{% load humanize %}
{% block headscripts %}
    <script src="{% static 'chartkick/Chart.bundle.js' %}"></script>
    <script src="{% static 'chartkick/chartkick.js' %}"></script>
{% endblock %}
{% block title %}
    Statistics - Metron
{% endblock title %}
{% block content %}
    {# Database Totals Section with HTMX auto-refresh #}
    <div hx-get="{% url 'statistics-totals' %}"
         hx-trigger="load, every 30s"
         hx-swap="outerHTML"
         hx-indicator="#totals-refresh-indicator">{% include "comicsdb/partials/statistics_totals.html" %}</div>
    {# Charts Section with HTMX auto-refresh #}
    <div hx-get="{% url 'statistics-charts' %}"
         hx-trigger="load, every 30s"
         hx-swap="outerHTML"
         hx-indicator="#charts-refresh-indicator">{% include "comicsdb/partials/statistics_charts.html" %}</div>
    {# Information Box #}
    <section class="section">
        <div class="notification is-info is-light">
            <div class="content">
                <p class="has-text-weight-bold">About These Statistics</p>
                <p>
                    These statistics are automatically generated from the Metron database and update live every 30 seconds.
                    They represent the collective efforts of our community in building a comprehensive comic book database.
                </p>
            </div>
        </div>
    </section>
{% endblock %}
