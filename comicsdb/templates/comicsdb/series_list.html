{% extends parent_template|default:"base.html" %}
{% load static %}
{% block title %}
    {% if title %}{{ title }}{% endif %}
    Series - Metron
{% endblock %}
{% block content %}
    <header class="block has-text-centered">
        <h1 class="title">
            {% if title %}{{ title }}{% endif %}
            Series
        </h1>
    </header>
    <section class="section">
        <div class="container">{% include "comicsdb/partials/series_filter.html" %}</div>
    </section>
    {% if series_list %}
        <section class="section pt-0">
            <div class="container">
                <nav class="level" aria-label="List navigation and actions">
                    <div class="level-left">
                        {# Item Count #}
                        <div class="level-item">
                            <p class="subtitle is-5">
                                <strong>{{ page_obj.paginator.count|default:series_list.count }}</strong> Series
                            </p>
                        </div>
                    </div>
                    {# Add Button #}
                    {% if user.is_authenticated %}
                        <div class="level-right">
                            <div class="level-item">
                                <a class="button is-rounded is-primary"
                                   href="{% url 'series:create' %}"
                                   title="Add a new series"
                                   aria-label="Add a new series">
                                    <span class="icon is-small" aria-hidden="true">
                                        <i class="fas fa-plus"></i>
                                    </span>
                                    <span>New</span>
                                </a>
                            </div>
                        </div>
                    {% endif %}
                </nav>
                {# Note: Series uses first_issue_cover, needs custom handling #}
                {% include "comicsdb/partials/series_card_grid.html" with items=series_list %}
            </div>
        </section>
    {% else %}
        <section class="section pt-0">
            <div class="container has-text-centered">
                {% if has_active_filters %}
                    <p class="title is-4">No results found</p>
                    <p class="subtitle">Try adjusting your search filters</p>
                    <a href="{% url 'series:list' %}" class="button is-light is-medium">
                        <span class="icon"><i class="fas fa-times"></i></span>
                        <span>Clear All Filters</span>
                    </a>
                {% else %}
                    {% include "comicsdb/partials/empty_state.html" with item_type="Series" create_url="series:create" create_title="Add a new series" %}
                {% endif %}
            </div>
        </section>
    {% endif %}
{% endblock %}
{% block pagination %}
    {% load pagination_tags %}
    {% include "comicsdb/partials/pagination.html" %}
{% endblock %}
