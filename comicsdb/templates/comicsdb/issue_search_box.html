{% load range_tags %}
<div class="box">
    <h2 class="title is-5">
        <span class="icon-text">
            <span class="icon has-text-link">
                <i class="fas fa-filter"></i>
            </span>
            <span>Filter Issues</span>
        </span>
    </h2>
    <form action="{% url 'issue:search' %}" method="get" accept-charset="utf-8">
        {# Series Name #}
        <div class="field">
            <label class="label" for="series_name">Series Name</label>
            <div class="control has-icons-left">
                <input class="input"
                       type="text"
                       id="series_name"
                       name="series_name"
                       placeholder="e.g., Amazing Spider-Man"
                       aria-label="Filter by series name">
                <span class="icon is-small is-left">
                    <i class="fas fa-archive"></i>
                </span>
            </div>
        </div>
        {# Series Volume #}
        <div class="field">
            <label class="label" for="series_volume">Volume Number</label>
            <div class="control has-icons-left">
                <input class="input"
                       type="text"
                       id="series_volume"
                       name="series_volume"
                       placeholder="e.g., 1"
                       aria-label="Filter by series volume number">
                <span class="icon is-small is-left">
                    <i class="fas fa-layer-group"></i>
                </span>
            </div>
        </div>
        {# Series Type #}
        <div class="field">
            <label class="label" for="series_type">Series Type</label>
            <div class="control has-icons-left">
                <div class="select is-fullwidth">
                    <select id="series_type"
                            name="series_type"
                            aria-label="Filter by series type">
                        <option value="">All Types</option>
                        {% for type in series_type %}<option value="{{ type.id }}">{{ type.name }}</option>{% endfor %}
                    </select>
                </div>
                <span class="icon is-small is-left">
                    <i class="fas fa-book"></i>
                </span>
            </div>
        </div>
        <hr class="my-4">
        {# Issue Number #}
        <div class="field">
            <label class="label" for="number">Issue Number</label>
            <div class="control has-icons-left">
                <input class="input"
                       type="text"
                       id="number"
                       name="number"
                       placeholder="e.g., 1"
                       aria-label="Filter by issue number">
                <span class="icon is-small is-left">
                    <i class="fas fa-hashtag"></i>
                </span>
            </div>
        </div>
        {# Alternative Number #}
        <div class="field">
            <label class="label" for="alt_number">Alternative Number</label>
            <div class="control has-icons-left">
                <input class="input"
                       type="text"
                       id="alt_number"
                       name="alt_number"
                       placeholder="e.g., 616"
                       aria-label="Filter by alternative number">
                <span class="icon is-small is-left">
                    <i class="fas fa-sort-numeric-down"></i>
                </span>
            </div>
        </div>
        <hr class="my-4">
        {# Cover Year #}
        <div class="field">
            <label class="label" for="cover_year">Cover Year</label>
            <div class="control has-icons-left">
                <div class="select is-fullwidth">
                    <select id="cover_year" name="cover_year" aria-label="Filter by cover year">
                        <option value="">All Years</option>
                        {% now "m" as current_month %}
                        {% now "Y" as current_year %}
                        {% if current_month >= '10' %}
                            {% with next_year=current_year|add:"1" %}<option value="{{ next_year }}">{{ next_year }}</option>{% endwith %}
                        {% endif %}
                        {% for year in 1939|cover_year_range:current_year %}<option value="{{ year }}">{{ year }}</option>{% endfor %}
                    </select>
                </div>
                <span class="icon is-small is-left">
                    <i class="fas fa-calendar-alt"></i>
                </span>
            </div>
        </div>
        {# Cover Month #}
        <div class="field">
            <label class="label" for="cover_month">Cover Month</label>
            <div class="control has-icons-left">
                <div class="select is-fullwidth">
                    <select id="cover_month"
                            name="cover_month"
                            aria-label="Filter by cover month">
                        <option value="">All Months</option>
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                </div>
                <span class="icon is-small is-left">
                    <i class="fas fa-calendar-day"></i>
                </span>
            </div>
        </div>
        <hr class="my-4">
        {# Comic Vine ID #}
        <div class="field">
            <label class="label" for="cv_id">Comic Vine ID</label>
            <div class="control has-icons-left">
                <input class="input"
                       type="text"
                       id="cv_id"
                       name="cv_id"
                       placeholder="e.g., 12345"
                       aria-label="Filter by Comic Vine ID">
                <span class="icon is-small is-left">
                    <i class="fas fa-fingerprint"></i>
                </span>
            </div>
        </div>
        {# GCD ID #}
        <div class="field">
            <label class="label" for="gcd_id">
                <abbr title="Grand Comics Database">GCD</abbr> ID
            </label>
            <div class="control has-icons-left">
                <input class="input"
                       type="text"
                       id="gcd_id"
                       name="gcd_id"
                       placeholder="e.g., 67890"
                       aria-label="Filter by GCD ID">
                <span class="icon is-small is-left">
                    <i class="fas fa-fingerprint"></i>
                </span>
            </div>
        </div>
        {# Submit Button #}
        <div class="field mt-5">
            <div class="control">
                <button class="button is-link is-fullwidth" type="submit">
                    <span class="icon">
                        <i class="fas fa-search"></i>
                    </span>
                    <span>Apply Filters</span>
                </button>
            </div>
        </div>
        {# Reset Link #}
        <div class="field">
            <div class="control">
                <a class="button is-light is-fullwidth"
                   href="{% url 'issue:list' %}"
                   title="Clear all filters and show all issues">
                    <span class="icon">
                        <i class="fas fa-times"></i>
                    </span>
                    <span>Clear Filters</span>
                </a>
            </div>
        </div>
    </form>
</div>
<style>
/* Sticky sidebar on larger screens */
@media screen and (min-width: 769px) {
    .column.is-one-fifth > .box {
        position: sticky;
        top: 4rem;
        max-height: calc(100vh - 5rem);
        overflow-y: auto;
    }
}
</style>
