{% load static %}
{% comment %}
    Main navigation bar with dropdown menus
    Includes authentication state and responsive mobile menu
{% endcomment %}
<nav class="navbar is-link is-fixed-top"
     role="navigation"
     aria-label="main navigation">
    <div class="navbar-brand">
        <a id="navbar-banner"
           class="navbar-item"
           href="{% url 'home' %}"
           aria-label="Metron home">
            <img src="{% static 'site/img/metron.svg' %}"
                 alt="Metron logo"
                 width="112"
                 height="28">
        </a>
        <a class="navbar-burger"
           role="button"
           aria-label="menu"
           aria-expanded="false"
           aria-controls="navMenu"
           onclick="this.classList.toggle('is-active'); document.getElementById('navMenu').classList.toggle('is-active');">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>
    <div id="navMenu" class="navbar-menu">
        <div class="navbar-start">
            {% if user.is_authenticated %}
                {# Releases Menu #}
                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link" aria-haspopup="true" aria-expanded="false">Releases</a>
                    <div class="navbar-dropdown">
                        <a class="navbar-item" href="{% url 'issue:thisweek' %}">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-star"></i>
                            </span>
                            <span>This Week</span>
                        </a>
                        <a class="navbar-item" href="{% url 'issue:nextweek' %}">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-bolt"></i>
                            </span>
                            <span>Next Week</span>
                        </a>
                        <a class="navbar-item" href="{% url 'issue:future' %}">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-gem"></i>
                            </span>
                            <span>Future</span>
                        </a>
                    </div>
                </div>
                {# Browse Menu #}
                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link" aria-haspopup="true" aria-expanded="false">Browse</a>
                    <div class="navbar-dropdown">
                        <a class="navbar-item" href="{% url 'publisher:list' %}">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-building"></i>
                            </span>
                            <span>Publishers</span>
                        </a>
                        <a class="navbar-item" href="{% url 'imprint:list' %}">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-bookmark"></i>
                            </span>
                            <span>Imprints</span>
                        </a>
                        <a class="navbar-item" href="{% url 'series:list' %}">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-list"></i>
                            </span>
                            <span>Series</span>
                        </a>
                        <a class="navbar-item" href="{% url 'issue:list' %}">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-book"></i>
                            </span>
                            <span>Issues</span>
                        </a>
                        <hr class="navbar-divider" role="separator">
                        <a class="navbar-item" href="{% url 'creator:list' %}">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-pencil-alt"></i>
                            </span>
                            <span>Creators</span>
                        </a>
                        <a class="navbar-item" href="{% url 'character:list' %}">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-mask"></i>
                            </span>
                            <span>Characters</span>
                        </a>
                        <a class="navbar-item" href="{% url 'team:list' %}">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-users"></i>
                            </span>
                            <span>Teams</span>
                        </a>
                        <hr class="navbar-divider" role="separator">
                        <a class="navbar-item" href="{% url 'arc:list' %}">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-project-diagram"></i>
                            </span>
                            <span>Story Arcs</span>
                        </a>
                        <a class="navbar-item" href="{% url 'universe:list' %}">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-globe"></i>
                            </span>
                            <span>Universes</span>
                        </a>
                        <hr class="navbar-divider" role="separator">
                        <a class="navbar-item" href="{% url 'reading-list:list' %}">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-book-reader"></i>
                            </span>
                            <span>Reading Lists</span>
                        </a>
                        {% if user.is_authenticated %}
                            <a class="navbar-item" href="{% url 'reading-list:my-lists' %}">
                                <span class="icon" aria-hidden="true">
                                    <i class="fas fa-clipboard-check"></i>
                                </span>
                                <span>My Reading Lists</span>
                            </a>
                            <a class="navbar-item" href="{% url 'user_collection:list' %}">
                                <span class="icon" aria-hidden="true">
                                    <i class="fas fa-box-open"></i>
                                </span>
                                <span>My Collection</span>
                            </a>
                        {% endif %}
                    </div>
                </div>
                {# More Menu #}
                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link" aria-haspopup="true" aria-expanded="false">More</a>
                    <div class="navbar-dropdown">
                        <a class="navbar-item" href="{% url 'wiki:root' %}">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-book-open"></i>
                            </span>
                            <span>Wiki</span>
                        </a>
                        {% if user.is_authenticated %}
                            <a class="navbar-item" href="/docs/">
                                <span class="icon" aria-hidden="true">
                                    <i class="fas fa-file"></i>
                                </span>
                                <span>API Docs</span>
                            </a>
                        {% endif %}
                        <a class="navbar-item" href="{% url 'statistics' %}">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-chart-bar"></i>
                            </span>
                            <span>Statistics</span>
                        </a>
                        <a class="navbar-item"
                           href="https://metron-project.github.io/blog"
                           target="_blank"
                           rel="noopener noreferrer">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-blog"></i>
                            </span>
                            <span>Blog</span>
                            <span class="icon is-small" aria-hidden="true">
                                <i class="fas fa-external-link-alt"></i>
                            </span>
                        </a>
                        <hr class="navbar-divider" role="separator">
                        <a class="navbar-item"
                           href="https://github.com/Metron-Project/metron/issues/new/choose"
                           target="_blank"
                           rel="noopener noreferrer">
                            <span class="icon" aria-hidden="true">
                                <i class="fas fa-bug"></i>
                            </span>
                            <span>Report an Issue</span>
                            <span class="icon is-small" aria-hidden="true">
                                <i class="fas fa-external-link-alt"></i>
                            </span>
                        </a>
                    </div>
                </div>
            {% endif %}
        </div>
        <div class="navbar-end">
            {# Social Links #}
            <a class="navbar-item"
               href="https://metron-project.github.io"
               target="_blank"
               rel="noopener noreferrer"
               aria-label="Metron on GitHub">
                <span class="icon">
                    <i class="fab fa-lg fa-github" aria-hidden="true"></i>
                </span>
            </a>
            <a class="navbar-item"
               rel="me"
               href="https://mastodon.social/@metron"
               target="_blank"
               aria-label="Metron on Mastodon">
                <span class="icon">
                    <i class="fab fa-lg fa-mastodon" aria-hidden="true"></i>
                </span>
            </a>
            {# User Authentication #}
            {% if user.is_authenticated %}
                <a class="navbar-item"
                   href="{% url 'user-detail' username=user.username %}"
                   aria-label="View your account">
                    <span class="icon" aria-hidden="true">
                        <i class="fas fa-user"></i>
                    </span>
                    <span>Account</span>
                </a>
            {% endif %}
            <div class="navbar-item">
                <div class="buttons">
                    {% if user.is_authenticated %}
                        <form method="post" action="{% url 'logout' %}">
                            {% csrf_token %}
                            <button class="button is-rounded is-light"
                                    type="submit"
                                    aria-label="Log out of your account">
                                <span class="icon" aria-hidden="true">
                                    <i class="fas fa-sign-out-alt"></i>
                                </span>
                                <span>Log out</span>
                            </button>
                        </form>
                    {% else %}
                        <a class="button is-rounded is-primary"
                           href="{% url 'signup' %}"
                           aria-label="Create a new account">
                            <strong>Sign up</strong>
                        </a>
                        <a class="button is-rounded is-light"
                           href="{% url 'login' %}"
                           aria-label="Log in to your account">Log in</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</nav>
